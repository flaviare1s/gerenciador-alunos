generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Aluno {
  id             Int           @id @default(autoincrement())
  nome           String
  sobrenome      String
  dataNascimento DateTime?
  cpf            String        @unique
  genero         String
  email          String        @unique
  cep            String
  rua            String
  numero         String
  complemento    String?
  bairro         String?
  cidade         String?
  estado         String?
  pais           String
  cursos         AlunoCurso[]  // relação N:N com Curso
  criadoEm       DateTime      @default(now())
  atualizadoEm   DateTime      @updatedAt
}

model Curso {
  id           Int           @id @default(autoincrement())
  nome         TipoCurso     @unique
  alunos       AlunoCurso[]  
  criadoEm     DateTime      @default(now())
  atualizadoEm DateTime      @updatedAt
}

model AlunoCurso {
  id           Int         @id @default(autoincrement())
  aluno        Aluno       @relation(fields: [alunoId], references: [id])
  alunoId      Int
  curso        Curso       @relation(fields: [cursoId], references: [id])
  cursoId      Int
  status       StatusCurso @default(EM_ANDAMENTO)
  dataConclusao     DateTime?

  @@unique([alunoId, cursoId])

}

enum StatusCurso {
  EM_ANDAMENTO
  CONCLUIDO
}

enum TipoCurso {
  DESIGN
  MARKETING
  PRODUCT
  INTRODUCAO_AO_FIGMA
  FULL_STACK
  FRONT_END
  BACK_END
  UI_UX
  BANCO_DE_DADOS
  CIENCIA_DE_DADOS
  DEVOPS
}
